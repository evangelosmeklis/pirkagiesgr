<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PirkagiesGr - Real-time Fire Monitoring</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔥</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%23000%22 rx=%2220%22/><text x=%2250%22 y=%2265%22 font-size=%2260%22 text-anchor=%22middle%22>🔥</text></svg>">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Google Analytics (conditional loading based on consent) -->
    <script>
        // Google Analytics with consent management
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        // Check if user has accepted cookies
        const hasConsentedToAnalytics = localStorage.getItem('analytics_consent') === 'accepted';
        
        if (hasConsentedToAnalytics) {
            // Load Google Analytics
            gtag('config', 'G-ZPTFP0E6Z9', {
                anonymize_ip: true,
                allow_google_signals: false,
                allow_ad_personalization_signals: false
            });
        } else {
            // Disable Google Analytics
            gtag('config', 'G-ZPTFP0E6Z9', {
                send_page_view: false
            });
        }
        
        // Function to enable analytics
        window.enableAnalytics = function() {
            gtag('config', 'G-ZPTFP0E6Z9', {
                anonymize_ip: true,
                allow_google_signals: false,
                allow_ad_personalization_signals: false
            });
            gtag('event', 'page_view');
        };
        
        // Function to disable analytics
        window.disableAnalytics = function() {
            gtag('config', 'G-ZPTFP0E6Z9', {
                send_page_view: false
            });
        };
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPTFP0E6Z9"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-fire"></i>
                    <h1 data-i18n="site-title">PirkagiesGr</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="active-fires">0</span>
                        <span class="stat-label" data-i18n="active-fires">Ενεργές Πυρκαγιές</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="last-update">--:--</span>
                        <span class="stat-label" data-i18n="data-fetched">Δεδομένα Ενημ.</span>
                    </div>
                </div>
                <div class="header-controls">
                    <div class="update-schedule-indicator">
                        <i class="fas fa-sync-alt"></i>
                        <span id="next-update" data-i18n="next-update">Δεδομένα ενημερώνονται κάθε 30 λεπτά</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Beta Disclaimer -->
        <div class="beta-disclaimer">
            <div class="beta-content">
                <i class="fas fa-exclamation-triangle beta-icon"></i>
                <span class="beta-text">
                    <strong data-i18n="beta-version">🚧 ΕΚΔΟΣΗ BETA</strong> - <span data-i18n="beta-text">Αυτός ο ιστότοπος είναι σε ενεργή ανάπτυξη και μπορεί να εμφανίσει λανθασμένες ή ελλιπείς πληροφορίες πυρκαγιών. Πάντα επαληθεύετε με επίσημες πηγές και τοπικές αρχές για καταστάσεις έκτακτης ανάγκης.</span>
                </span>
                <button class="beta-close" id="beta-close" title="Dismiss">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="live">
                <i class="fas fa-map-marked-alt"></i>
                <span data-i18n="live-map">Ζωντανός Χάρτης Πυρκαγιών</span>
            </button>
            <button class="tab-btn" data-tab="historical">
                <i class="fas fa-history"></i>
                <span data-i18n="last-7-days">Πυρκαγιές Τελευταίων 7 Ημερών</span>
            </button>
            <button class="tab-btn" data-tab="about">
                <i class="fas fa-info-circle"></i>
                <span data-i18n="about">Σχετικά</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Live Fire Map Tab -->
            <div class="tab-content active" id="live-tab">
                <!-- Disclaimer Banner -->
                <div class="disclaimer-banner">
                    <div class="disclaimer-content">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span data-i18n="disclaimer-banner"><strong>Μόνο για ενημερωτικούς σκοπούς.</strong> Δεδομένα πυρκαγιών από το NASA FIRMS. Σε περίπτωση έκτακτης ανάγκης, επικοινωνήστε με τοπικές αρχές (Ελλάδα: 199, ΕΕ: 112).</span>
                    </div>
                </div>
                
                <div class="map-container">
                    <div id="map"></div>
                    
                    <!-- Map Controls -->
                    <div class="map-controls">
                        <div class="controls-header">
                            <h3 data-i18n="fire-controls">🔥 Έλεγχος Πυρκαγιών</h3>
                            <button class="controls-toggle" id="controls-toggle" title="Toggle controls">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                        </div>
                        <div class="controls-content">
                        <div class="control-group">
                            <label data-i18n="detection-confidence">🎯 Βεβαιότητα Ανίχνευσης:</label>
                            <select id="confidence-filter" title="Filter by detection confidence level">
                                <option value="all" data-i18n="all-detections">Όλες οι Ανιχνεύσεις</option>
                                <option value="high" data-i18n="good-detections">🔥🟠 Καλές Ανιχνεύσεις (≥50%)</option>
                                <option value="low" data-i18n="low-confidence">⚠️ Χαμηλή Βεβαιότητα (<50%)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label data-i18n="time-period">⏱️ Χρονική Περίοδος:</label>
                            <select id="time-filter" title="Select time period">
                                <option value="0.04" data-i18n="last-hour">Τελευταία Ώρα</option>
                                <option value="1" selected data-i18n="last-24-hours">Τελευταίες 24 ώρες</option>
                                <option value="3" data-i18n="last-3-days">Τελευταίες 3 ημέρες</option>
                                <option value="7" data-i18n="last-week">Τελευταία εβδομάδα</option>
                            </select>
                        </div>
                        <div class="data-source-info">
                            <div class="source-badge" data-i18n="satellite-data">
                                🛰️ Δεδομένα MODIS & VIIRS σε πραγματικό χρόνο
                            </div>
                            <p class="source-description" data-i18n="satellite-description">Συνδυασμένη δορυφορική θερμική ανίχνευση από δορυφόρους NASA Terra, Aqua & Suomi NPP. Διαφορετικά εικονίδια διακρίνουν πηγές δεδομένων και επίπεδα βεβαιότητας.</p>
                        </div>
                        </div>
                    </div>

                    <!-- Fire Info Panel -->
                    <div class="fire-info-panel" id="fire-info-panel">
                        <div class="panel-header">
                            <h3 data-i18n="fire-information">Πληροφορίες Πυρκαγιάς</h3>
                            <button class="close-btn" id="close-panel" title="Close panel">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="panel-content" id="panel-content">
                            <p data-i18n="click-fire-marker">Κάντε κλικ σε έναν δείκτη πυρκαγιάς για να δείτε λεπτομέρειες</p>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="map-legend">
                        <h4 data-i18n="fire-detection-legend">Υπόμνημα Ανίχνευσης Πυρκαγιών</h4>
                        <div class="legend-section">
                            <div class="legend-item">
                                <div class="legend-marker">🔥</div>
                                <span data-i18n="modis-fire-detection">Ανίχνευση Πυρκαγιάς MODIS (≥50% βεβαιότητα)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-marker">🟠</div>
                                <span data-i18n="viirs-thermal-detection">Θερμική Ανίχνευση VIIRS (≥50% βεβαιότητα)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-marker">⚠️</div>
                                <span data-i18n="low-confidence-detection">Ανίχνευση Χαμηλής Βεβαιότητας (<50%)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historical Fires Tab -->
            <div class="tab-content" id="historical-tab">
                <div class="historical-container">
                    <div class="historical-header">
                        <h2 data-i18n="historical-fire-data">Ιστορικά Δεδομένα Πυρκαγιών</h2>
                        <p class="historical-disclaimer" data-i18n="historical-disclaimer">📅 Τα ιστορικά δεδομένα δείχνουν τις τελευταίες 7 ημέρες ανιχνεύσεων πυρκαγιάς από δορυφόρους NASA MODIS.</p>
                        <div class="historical-controls">
                            <input type="date" id="start-date" class="date-input" data-i18n="start-date" title="Ημερομηνία Έναρξης">
                            <input type="date" id="end-date" class="date-input" data-i18n="end-date" title="Ημερομηνία Λήξης">
                            <button class="btn btn-primary" id="filter-historical" data-i18n="filter">Φίλτρο</button>
                        </div>
                    </div>
                    <div class="historical-stats">
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="total-historical">0</span>
                                <span class="stat-title" data-i18n="total-fires">Συνολικές Πυρκαγιές</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-day"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="avg-daily">0</span>
                                <span class="stat-title" data-i18n="avg-daily">Μέσος Ημερήσιος</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-thermometer-three-quarters"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="avg-intensity">0</span>
                                <span class="stat-title" data-i18n="avg-intensity">Μέση Ένταση</span>
                            </div>
                        </div>
                    </div>
                    <div class="historical-table-container">
                        <table class="historical-table" id="historical-table">
                            <thead>
                                <tr>
                                    <th data-i18n="detection-time-greece">Ώρα Ανίχνευσης (Ελλάδα)</th>
                                    <th data-i18n="location">Τοποθεσία:</th>
                                    <th data-i18n="confidence">Βεβαιότητα</th>
                                    <th data-i18n="brightness">Φωτεινότητα</th>
                                    <th>FRP</th>
                                    <th data-i18n="satellite">Δορυφόρος:</th>
                                </tr>
                            </thead>
                            <tbody id="historical-tbody">
                                <!-- Historical data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>



            <!-- About Tab -->
            <div class="tab-content" id="about-tab">
                <div class="about-container">
                    <div class="about-content">
                        <h1 data-i18n="about-title">🔥 PirkagiesGr</h1>
                        <p class="about-subtitle" data-i18n="about-subtitle">Παρακολούθηση δασικών πυρκαγιών σε πραγματικό χρόνο για την Ελλάδα χρησιμοποιώντας δορυφορικά δεδομένα της NASA</p>
                        
                        <div class="about-section beta-warning">
                            <h2 data-i18n="beta-notice">🚧 Ειδοποίηση Έκδοσης Beta</h2>
                            <div class="disclaimer-card beta-card">
                                <p data-i18n="beta-notice-text"><strong>Αυτή η εφαρμογή βρίσκεται αυτή τη στιγμή στη φάση δοκιμών BETA.</strong></p>
                                <ul>
                                    <li data-i18n="features-incomplete">Χαρακτηριστικά μπορεί να μην λειτουργούν όπως αναμένεται ή να είναι ελλιπή</li>
                                    <li data-i18n="data-validation">Η ακρίβεια των δεδομένων πυρκαγιάς εξακολουθεί να επικυρώνεται και βελτιώνεται</li>
                                    <li data-i18n="frequent-changes">Η λειτουργικότητα του ιστότοπου υπόκειται σε συχνές αλλαγές</li>
                                    <li data-i18n="report-issues">Αναφέρετε τυχόν προβλήματα ή σφάλματα που αντιμετωπίζετε για βελτίωση</li>
                                </ul>
                                <p class="beta-note" data-i18n="use-discretion">
                                    <i class="fas fa-info-circle"></i>
                                    <strong>Χρησιμοποιήστε με δική σας διακριτικότητα.</strong> Πάντα επαληθεύετε τις πληροφορίες πυρκαγιάς με επίσημες πηγές και τοπικές αρχές.
                                </p>
                            </div>
                        </div>
                        
                        <div class="about-section">
                            <h2 data-i18n="important-disclaimer">⚠️ Σημαντική Αποποίηση Ευθυνών</h2>
                            <div class="disclaimer-card">
                                <p data-i18n="informational-only"><strong>Αυτή η εφαρμογή είναι μόνο για ενημερωτικούς σκοπούς.</strong></p>
                                <ul>
                                    <li data-i18n="data-delays">Τα δεδομένα ανίχνευσης πυρκαγιάς μπορεί να έχουν καθυστερήσεις ή ανακρίβειες</li>
                                    <li data-i18n="small-fires">Μικρές πυρκαγιές μπορεί να μην ανιχνεύονται από δορυφόρους</li>
                                    <li data-i18n="weather-affects">Οι καιρικές συνθήκες μπορεί να επηρεάσουν την ακρίβεια ανίχνευσης</li>
                                    <li data-i18n="follow-official">Πάντα ακολουθείτε επίσημες εντολές εκκένωσης και οδηγίες ασφάλειας</li>
                                </ul>
                                <div class="emergency-numbers">
                                    <h3 data-i18n="emergency-contacts">🚨 Τηλέφωνα Έκτακτης Ανάγκης</h3>
                                    <p data-i18n="greece-fire-service"><strong>Πυροσβεστική Υπηρεσία Ελλάδας:</strong> 199</p>
                                    <p data-i18n="european-emergency"><strong>Ευρωπαϊκή Έκτακτη Ανάγκη:</strong> 112</p>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2 data-i18n="data-sources-attribution">🛰️ Πηγές Δεδομένων & Αναφορά</h2>
                            <div class="attribution-card">
                                <div class="source-item">
                                    <h3 data-i18n="nasa-firms">NASA FIRMS</h3>
                                    <p data-i18n="nasa-firms-desc">Δεδομένα ανίχνευσης πυρκαγιάς παρέχονται από το Σύστημα Πληροφοριών Πυρκαγιάς για Διαχείριση Πόρων της NASA (FIRMS)</p>
                                    <a href="https://firms.modaps.eosdis.nasa.gov/" target="_blank" rel="noopener" data-i18n="visit-nasa-firms">Επισκεφθείτε το NASA FIRMS</a>
                                </div>
                                
                                <div class="source-item">
                                    <h3 data-i18n="satellite-data-title">Δορυφορικά Δεδομένα</h3>
                                    <p data-i18n="satellite-data-desc">Όργανα MODIS και VIIRS στους δορυφόρους Terra, Aqua, NOAA-20 και NOAA-21</p>
                                </div>
                                
                                <div class="source-item">
                                    <h3 data-i18n="weather-data-title">Καιρικά Δεδομένα</h3>
                                    <p data-i18n="weather-data-desc">Πληροφορίες καιρού παρέχονται από το OpenWeatherMap API</p>
                                    <a href="https://openweathermap.org/" target="_blank" rel="noopener">OpenWeatherMap</a>
                                </div>

                                <div class="source-item">
                                    <h3 data-i18n="satellite-imagery-title">Δορυφορικές Εικόνες</h3>
                                    <p data-i18n="satellite-imagery-desc">Δορυφορικός χάρτης βάσης παρέχεται από την Esri</p>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2 data-i18n="fire-detection-tech">📊 Τεχνολογία Ανίχνευσης Πυρκαγιάς</h2>
                            <div class="tech-card">
                                <h3 data-i18n="confidence-levels">Επίπεδα Βεβαιότητας</h3>
                                <div class="confidence-levels">
                                    <div class="confidence-item">
                                        <span class="emoji">🔥</span>
                                        <div>
                                            <strong data-i18n="high-confidence">Υψηλή (80-100%)</strong>
                                            <p data-i18n="high-confidence-desc">Επιβεβαιωμένες ενεργές πυρκαγιές με ισχυρές θερμικές υπογραφές</p>
                                        </div>
                                    </div>
                                    <div class="confidence-item">
                                        <span class="emoji">🟠</span>
                                        <div>
                                            <strong data-i18n="medium-confidence">Μεσαία (50-79%)</strong>
                                            <p data-i18n="medium-confidence-desc">Πιθανές πυρκαγιές που μπορεί να χρειάζονται επαλήθευση από το έδαφος</p>
                                        </div>
                                    </div>
                                    <div class="confidence-item">
                                        <span class="emoji">⚠️</span>
                                        <div>
                                            <strong>Χαμηλή (0-49%)</strong>
                                            <p data-i18n="low-confidence-desc">Πιθανές πυρκαγιές, θα μπορούσαν να είναι άλλες πηγές θερμότητας</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>🔄 Automatic Data Updates</h2>
                            <div class="update-info">
                                <p><strong>How it works:</strong> This website automatically updates fire data every 30 minutes using GitHub Actions.</p>
                                <ul>
                                    <li><strong>GitHub Action runs every 30 minutes</strong> to fetch fresh fire data from NASA FIRMS</li>
                                    <li><strong>New data is automatically processed</strong> and saved as JSON files</li>
                                    <li><strong>Website updates instantly</strong> when you refresh the page or visit it</li>
                                    <li><strong>No manual intervention required</strong> - everything happens automatically</li>
                                </ul>
                                <p class="update-note">
                                    <i class="fas fa-info-circle"></i>
                                    You don't need to manually refresh the page. Simply reload the website to get the latest fire data that was fetched by our automated system.
                                </p>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>🔧 Technical Information</h2>
                            <div class="tech-details">
                                <p><strong>NASA Data Update Frequency:</strong> Every 3-6 hours (depending on satellite overpass)</p>
                                <p><strong>Our Fetch Frequency:</strong> Every 30 minutes via GitHub Actions</p>
                                <p><strong>Detection Resolution:</strong> 375m - 1km depending on sensor</p>
                                <p><strong>Geographic Coverage:</strong> Greece (Hellenic Republic)</p>
                                <p><strong>Data Storage:</strong> Static JSON files updated automatically</p>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>📄 Legal</h2>
                            <div class="legal-text">
                                <p>This application is provided "as is" without warranty of any kind. The developers are not responsible for any decisions made based on the information provided.</p>
                                <p>Fire data courtesy of NASA FIRMS. Weather data courtesy of OpenWeatherMap. Satellite imagery courtesy of Esri.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-fire"></i>
                <p data-i18n="loading-fire-data">Φόρτωση δεδομένων πυρκαγιάς...</p>
            </div>
        </div>

        <!-- Cookie Consent Banner -->
        <div class="cookie-consent-banner" id="cookie-consent-banner">
            <div class="cookie-content">
                <div class="cookie-text">
                    <h3 data-i18n="cookie-consent">🍪 Συγκατάθεση Cookies</h3>
                    <p data-i18n="cookie-text">Χρησιμοποιούμε το Google Analytics για να κατανοήσουμε πώς αλληλεπιδρούν οι επισκέπτες με τον ιστότοπό μας. Αυτό μας βοηθά να βελτιώσουμε την εμπειρία χρήστη. Μπορείτε να επιλέξετε να αποδεχτείτε ή να απορρίψετε τα cookies analytics.</p>
                </div>
                <div class="cookie-buttons">
                    <button class="btn btn-reject" id="reject-cookies" data-i18n="reject">Απόρριψη</button>
                    <button class="btn btn-accept" id="accept-cookies" data-i18n="accept">Αποδοχή</button>
                </div>
            </div>
        </div>


    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/language.js"></script>
    <script src="js/api-service.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
