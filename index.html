<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PirkagiesGr - Real-time Fire Monitoring</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-fire"></i>
                    <h1>PirkagiesGr</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="active-fires">0</span>
                        <span class="stat-label">Active Fires</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="last-update">--:--</span>
                        <span class="stat-label">Last Update</span>
                    </div>
                </div>
                <div class="header-controls">
                    <button class="btn btn-refresh" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="live">
                <i class="fas fa-map-marked-alt"></i>
                Live Fire Map
            </button>
            <button class="tab-btn" data-tab="historical">
                <i class="fas fa-history"></i>
                Historical Fires
            </button>
            <button class="tab-btn" data-tab="analytics">
                <i class="fas fa-chart-line"></i>
                Analytics
            </button>
            <button class="tab-btn" data-tab="about">
                <i class="fas fa-info-circle"></i>
                About
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Live Fire Map Tab -->
            <div class="tab-content active" id="live-tab">
                <!-- Disclaimer Banner -->
                <div class="disclaimer-banner">
                    <div class="disclaimer-content">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span><strong>For informational purposes only.</strong> Fire data provided by NASA FIRMS. In case of emergency, contact local authorities (Greece: 199, EU: 112).</span>
                    </div>
                </div>
                
                <div class="map-container">
                    <div id="map"></div>
                    
                    <!-- Map Controls -->
                    <div class="map-controls">
                        <div class="control-group">
                            <label>Fire Confidence:</label>
                            <select id="confidence-filter" title="Filter by confidence level">
                                <option value="all">All Levels</option>
                                <option value="high">High (>80%)</option>
                                <option value="medium">Medium (50-80%)</option>
                                <option value="low">Low (<50%)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Time Period:</label>
                            <select id="time-filter" title="Select time period">
                                <option value="1">Last 24 hours</option>
                                <option value="3">Last 3 days</option>
                                <option value="7">Last week</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Data Source:</label>
                            <select id="source-filter" title="Select data source">
                                <option value="MODIS_NRT">MODIS (Real-time)</option>
                                <option value="VIIRS_SNPP_NRT">VIIRS SNPP</option>
                                <option value="VIIRS_NOAA20_NRT">VIIRS NOAA20</option>
                            </select>
                        </div>
                    </div>

                    <!-- Fire Info Panel -->
                    <div class="fire-info-panel" id="fire-info-panel">
                        <div class="panel-header">
                            <h3>Fire Information</h3>
                            <button class="close-btn" id="close-panel" title="Close panel">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="panel-content" id="panel-content">
                            <p>Click on a fire marker to see details</p>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="map-legend">
                        <h4>Fire Confidence</h4>
                        <div class="legend-item">
                            <div class="legend-marker high-confidence"></div>
                            <span>High (80-100%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-marker medium-confidence"></div>
                            <span>Medium (50-79%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-marker low-confidence"></div>
                            <span>Low (0-49%)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historical Fires Tab -->
            <div class="tab-content" id="historical-tab">
                <div class="historical-container">
                    <div class="historical-header">
                        <h2>Historical Fire Data</h2>
                        <div class="historical-controls">
                            <input type="date" id="start-date" class="date-input" title="Start date">
                            <input type="date" id="end-date" class="date-input" title="End date">
                            <button class="btn btn-primary" id="filter-historical">Filter</button>
                        </div>
                    </div>
                    <div class="historical-stats">
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="total-historical">0</span>
                                <span class="stat-title">Total Fires</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-day"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="avg-daily">0</span>
                                <span class="stat-title">Avg Daily</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-thermometer-three-quarters"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="avg-intensity">0</span>
                                <span class="stat-title">Avg Intensity</span>
                            </div>
                        </div>
                    </div>
                    <div class="historical-table-container">
                        <table class="historical-table" id="historical-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Location</th>
                                    <th>Confidence</th>
                                    <th>Brightness</th>
                                    <th>FRP</th>
                                    <th>Satellite</th>
                                </tr>
                            </thead>
                            <tbody id="historical-tbody">
                                <!-- Historical data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div class="tab-content" id="analytics-tab">
                <div class="analytics-container">
                    <h2>Fire Analytics Dashboard</h2>
                    <div class="charts-grid">
                        <div class="chart-container">
                            <canvas id="monthly-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="confidence-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Tab -->
            <div class="tab-content" id="about-tab">
                <div class="about-container">
                    <div class="about-content">
                        <h1>üî• PirkagiesGr</h1>
                        <p class="about-subtitle">Real-time wildfire monitoring for Greece using NASA satellite data</p>
                        
                        <div class="about-section">
                            <h2>‚ö†Ô∏è Important Disclaimer</h2>
                            <div class="disclaimer-card">
                                <p><strong>This application is for informational purposes only.</strong></p>
                                <ul>
                                    <li>Fire detection data may have delays or inaccuracies</li>
                                    <li>Small fires may not be detected by satellites</li>
                                    <li>Weather conditions can affect detection accuracy</li>
                                    <li>Always follow official evacuation orders and safety guidelines</li>
                                </ul>
                                <div class="emergency-numbers">
                                    <h3>üö® Emergency Contacts</h3>
                                    <p><strong>Greece Fire Service:</strong> 199</p>
                                    <p><strong>European Emergency:</strong> 112</p>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>üõ∞Ô∏è Data Sources & Attribution</h2>
                            <div class="attribution-card">
                                <div class="source-item">
                                    <h3>NASA FIRMS</h3>
                                    <p>Fire detection data provided by NASA's Fire Information for Resource Management System (FIRMS)</p>
                                    <a href="https://firms.modaps.eosdis.nasa.gov/" target="_blank" rel="noopener">Visit NASA FIRMS</a>
                                </div>
                                
                                <div class="source-item">
                                    <h3>Satellite Data</h3>
                                    <p>MODIS and VIIRS instruments on Terra, Aqua, NOAA-20, and NOAA-21 satellites</p>
                                </div>
                                
                                <div class="source-item">
                                    <h3>Weather Data</h3>
                                    <p>Weather information provided by OpenWeatherMap API</p>
                                    <a href="https://openweathermap.org/" target="_blank" rel="noopener">OpenWeatherMap</a>
                                </div>

                                <div class="source-item">
                                    <h3>Satellite Imagery</h3>
                                    <p>Satellite base map provided by Esri</p>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>üìä Fire Detection Technology</h2>
                            <div class="tech-card">
                                <h3>Confidence Levels</h3>
                                <div class="confidence-levels">
                                    <div class="confidence-item">
                                        <span class="emoji">üî•</span>
                                        <div>
                                            <strong>High (80-100%)</strong>
                                            <p>Confirmed active fires with strong thermal signatures</p>
                                        </div>
                                    </div>
                                    <div class="confidence-item">
                                        <span class="emoji">üü†</span>
                                        <div>
                                            <strong>Medium (50-79%)</strong>
                                            <p>Likely fires that may require ground verification</p>
                                        </div>
                                    </div>
                                    <div class="confidence-item">
                                        <span class="emoji">üü°</span>
                                        <div>
                                            <strong>Low (0-49%)</strong>
                                            <p>Possible fires, could be other heat sources</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>üîß Technical Information</h2>
                            <div class="tech-details">
                                <p><strong>Data Update Frequency:</strong> Every 3-6 hours (depending on satellite overpass)</p>
                                <p><strong>Detection Resolution:</strong> 375m - 1km depending on sensor</p>
                                <p><strong>Geographic Coverage:</strong> Greece (Hellenic Republic)</p>
                                <p><strong>Database:</strong> Local browser storage for historical analysis</p>
                            </div>
                        </div>

                        <div class="about-section">
                            <h2>üìÑ Legal</h2>
                            <div class="legal-text">
                                <p>This application is provided "as is" without warranty of any kind. The developers are not responsible for any decisions made based on the information provided.</p>
                                <p>Fire data courtesy of NASA FIRMS. Weather data courtesy of OpenWeatherMap. Satellite imagery courtesy of Esri.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-fire"></i>
                <p>Loading fire data...</p>
            </div>
        </div>


    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="database.js"></script>
    <script src="weather.js"></script>
    <script src="app.js"></script>
</body>
</html>
